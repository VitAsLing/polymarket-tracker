name = "polymarket-tracker"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# KV Storage (subscriptions + activity timestamps)
[[kv_namespaces]]
binding = "POLYMARKET_KV"
id = "ff4b4c68235844ae9175116b2ee7ee21"

# Durable Objects
[[durable_objects.bindings]]
name = "SCHEDULER_DO"
class_name = "SchedulerDO"

[[migrations]]
tag = "v1"
new_classes = ["SchedulerDO"]

# Heartbeat: ensure DO alarm is running (every minute)
[triggers]
crons = ["* * * * *"]

# Telegram config (set via secret)
# bunx wrangler secret put TG_BOT_TOKEN

# Environment variables
[vars]
CHECK_INTERVAL_MS = 10000  # Polling interval in milliseconds (default: 10s)

# Logging
[observability]
enabled = true
[observability.logs]
enabled = true
invocation_logs = true
